Прямой доступ к видеопамяти в текстовых видеорежимах:

Структура видеопамяти:
В текстовых режимах для хранения каждого изображенного символа используются два байта:

Байт с ASCII-кодом символа.
Байт атрибута символа (указывает цвет символа и фона, мигание).
Адреса видеопамяти начинаются с B800h:0000h и заканчиваются на B800h:FFFFh. Запись в эту область памяти пересылает данные в память видеоадаптера и отображает их на экране.

Установка видеорежима:

Прерывание BIOS 10h, функция 00:
Ввод: AH = 00, AL = номер режима.
Номера режимов:
00: 40х25 черно-белый текстовый режим.
01: 40х25 стандартный 16-цветный текстовый режим.
02: 80х25 черно-белый текстовый режим.
03: 80х25 стандартный 16-цветный текстовый режим.
07: 80х25 черно-белый стандартный монохромный.
Конфигурация оборудования:

Прерывание BIOS 11h:
Ввод: AH = 11.
Вывод: AX = состояние оборудования (биты 5 и 4 указывают текущий видеорежим).
Прокрутка экрана:

Прерывание BIOS 10h, функции 06 и 07:
Ввод: AH = 06/07, AL = 00 для прокрутки всего экрана.
Вывод символов на экран:

Прерывание BIOS 10h, функции 09, 0A и 0E:
Ввод: AH = 09/0A/0E, BH = номер страницы, AL = ASCII-код символа, BL = атрибут символа, CX = число повторений символа.
Вывод строки символов:

Прерывание BIOS 10h, функция 13h:
Ввод: AH = 13h, AL = режим вывода (биты 0 и 1), BH = номер страницы, CX = длина строки, DX = координаты курсора.
Режим вывода:
Бит 0: Переместить курсор в конец строки после вывода.
Бит 1: Строка содержит не только символы, но также и атрибуты.





Обработка нажатия кнопок клавиатуры:

Способы обработки:

Прерывания DOS 21h. Вывод строки
Прерывания BIOS 16h. Для работы с клавиатурой (чтение, ожидание)
Прямой доступ к буферу клавиатуры.
Доступ к портам ввода-вывода клавиатуры.
Скан-коды клавиш:

Уникальные коды, посылаемые клавишей при нажатии и отпускании.
Обрабатываются BIOS и записываются в кольцевой буфер клавиатуры.
Прерывание BIOS 16h:

Функция 00h (10h, 20h) – чтение символа с ожиданием:

Ввод: AH = тип клавиатуры (00h/10h/20h).
Вывод: Если клавише соответствует ASCII-символ, то в AH - код символа, в AL - скан-код.
Если клавише соответствует расширенный ASCII-код, то AL - префикс скан-кода (например, E0), AH - расширенный ASCII-код.
Функция 01h (11h, 21h) – проверка наличия символа в буфере:

Ввод: AH = тип клавиатуры (01h/11h/21h).
Вывод: Если буфер пуст, то флаг ZF = 1.
Если в буфере символ, то флаг ZF = 0, AX содержит информацию: AL - ASCII-код или префикс скан-кода, AH - скан-код.
Функция 02h (12h, 22h) – получить состояние клавиатуры:

Ввод: AH = тип клавиатуры (02h/12h/22h).
Вывод: AL - байт состояния клавиатуры 1, AH - байт состояния клавиатуры 2 (только для функций 12h и 22h).
Байт состояния клавиатуры 1 находится по адресу 0000h:0417h или 0040h:0017h.
Функция 05 – поместить символ в буфер клавиатуры:

Ввод: AH = 05h, CH = скан-код (0, если ASCII), CL = ASCII-код.
Вывод: Если успешно, то AL = 00; если буфер переполнен, то AL = 01h.
Прямой доступ к буферу клавиатуры:

Запись и считывание значений напрямую из буфера клавиатуры.
Изменение состояния клавиатуры без вызова прерывания.
Байты состояния клавиатуры:

Значения в памяти DOS по адресу 0000h:0417h или 0040h:0017h.
Могут быть считаны и перезаписаны напрямую.



Доступ к системным часам:

Функция DOS 2Ch (INT 21h) – Считать время:

Ввод: AH = 2Ch.
Вывод: СН - час, CL - минута, DH - секунда, DL - сотая доля секунды.
Прерывание BIOS 1Ah, функция 02h – Считать время RTC:

Ввод: AH = 02h.
Вывод: CF = 1 (если часы не работают или обновление), СН - час (в формате BCD), CL - минута (BCD), DH - секунда (BCD).
Прерывание BIOS 1Ah, функция 04h – Считать дату RTC:

Ввод: AH = 04h.
Вывод: CF = 1 (если часы не работают или обновление), СХ - год (BCD), DH - месяц (BCD), DL - день (BCD).
Прерывание BIOS 1Ah, функция 01h – Установить значение счетчика времени:

Ввод: AH = 01h, CX:DX = значение счетчика.
Прерывание BIOS 15h, функция 86h – Формирование задержки таймера:

Ввод: AH = 86h, CX:DX = длительность задержки в микросекундах.
Прерывание BIOS 15h, функция 83h – Управление работой счетчика:

Ввод: AH = 83h.
Опции:
AL = 1 – прервать счетчик.
AL = 0 – запустить счетчик.
Дополнительные параметры:
CX:DX – длительность задержки в микросекундах.
ES:BX – адрес байта, старший бит которого по окончании работы изменится.